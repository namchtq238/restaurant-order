<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace = "~{header :: html_header}">
<body>
    <header th:replace="header :: my-header"></header>

    <!--====== SHOPPING CART PART START ======-->

    <div th:replace="index :: my-preOrder"></div>
    <!--====== SHOPPING CART PART ENDS ======-->

    <main>
        <div class="container">
            <div class="row">
                <div class="col-lg-9 mt-70 mb-50">
                    <div class="common-view-preOrder pt-4 pb-4">
                        <p class="text-preOrder  mb-0 ">Thanh toán</p>
                    </div>
                    <form method="post" th:action="@{/preOrder/save}" th:object="${listQuantity}">
                        <div class="displayProduct row pt-3 pb-3">
                        <ul id="mainCart">
                            <div th:each="cartItem : ${listProductInCart}">
                                <li>
                                    <table>
                                        <tbody>
                                        <tr>
                                            <td><div class="img-product ">
                                                <img th:src="@{'/image/ImageOrFarm/'+${cartItem.image}}" alt="">
                                            </div>
                                            </td>
                                            <td style="width: 200px">
                                                <div class="infor-product pl-3">
                                                    <input type="hidden" value="1" id="` + cartMain[i].productId + `">
                                                    <a th:href="@{'/product/' + ${cartItem.productId}}">
                                                        <h3 th:text="${cartItem.productName}"></h3>
                                                    </a>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="buttons_added" >
                                                    <input class="inputQuantity"
                                                           name="soluong"
                                                           id="soluong"
                                                           min='1' type='number'
                                                            th:value="${cartItem.quantity}"
                                                    />
                                                </div>
                                            </td>
                                            <td>
                                                <a th:href="@{'/preOrder/' + ${cartItem.productId}}" data-toggle="tooltip" data-placement="top" title="Edit">
                                                    <div class="icon-delete" id="1">
                                                        <i class="icon-delete1 fas fa-trash-alt">
                                                        </i>
                                                    </div>
                                                </a>
                                            </td>
                                            <td>
                                                <div class="sumPro">
                                                    <span th:text="${format.formatPrice(cartItem.totalPrice)}"></span><sup>đ</sup>
                                                </div>
                                            </td>

                                        </tr>
                                        </tbody>
                                    </table>
                                </li>
                            </div>
                        </ul>
                    </div>
                    </form>
                </div>
                <div class="col-lg-3 box-fee mt-70 mb-50 pt-3">
                    <div class="immidiate-fee ">
                        Tạm tính: <span class="prices" th:text="${tempPrice}"></span> <sup>đ</sup>
                    </div>

                    <div class="shipping-fee pt-4">
                        <div class="payment">
                            <form th:action="@{/payment}" method="get">
                            <button type="submit" class="btn btn-warning pt-50 pl-50">Tiến hành thanh toán</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
    </main>
    <footer th:replace = "~{footer :: html_footer}"> </footer>
</body>
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <th:block th:insert="~{header :: script}"></th:block>
<!--====== Main js ======-->
<!-- <script src="assets/js/main.js"></script> -->
<script type="text/javascript">
    $(window).load(function () {
        showProduct();
        immidiateSum();
        
    }); 
 </script>
</html>